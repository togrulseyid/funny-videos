package com.togrulseyid.funnyvideos.adapters;

import java.util.ArrayList;

import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.togrulseyid.funnyvideos.R;
import com.togrulseyid.funnyvideos.models.ChannelListModel;
import com.togrulseyid.funnyvideos.models.ChannelModel;
import com.togrulseyid.funnyvideos.operations.Utility;

public class ChannelListAdapter extends BaseAdapter {

	private ArrayList<ChannelModel> channelModels;
	private ChannelModel channelModel;
	private Activity activity;
	private ViewHolder viewHolder;

	public ChannelListAdapter(Activity activity,
			ChannelListModel channelListModel) {
		this.channelModels = channelListModel.getChannelModels();
		this.activity = activity;
	}

	@Override
	public int getCount() {
		return channelModels.size();
	}

	@Override
	public ChannelModel getItem(int position) {
		return channelModels.get(position);
	}

	@Override
	public long getItemId(int id) {
		return id;
	}

	@Override
	public View getView(int position, View convertView, ViewGroup viewGroup) {

		View view = convertView;
		if (convertView == null) {
			viewHolder = new ViewHolder();

			view = activity.getLayoutInflater().inflate(
					R.layout.channel_list_item, viewGroup, false);

			viewHolder.imageViewChannelLogo = (ImageView) view
					.findViewById(R.id.imageViewChannelListItemLogo);
			viewHolder.textViewChanneName = (TextView) view
					.findViewById(R.id.textViewChannelListItemName);

		} else {
			view.setTag(viewHolder);
		}

		channelModel = getItem(position);

		if (channelModel != null) {

			if (!Utility.isEmptyOrNull(channelModel.getImage())) {

				Picasso.with(activity).load(channelModel.getImage())
						.placeholder(R.drawable.default_img_tv_channel)
						.error(R.drawable.default_img_tv_channel_error)
						.into(viewHolder.imageViewChannelLogo);
			} else {
				Log.d("testTV_channelModel","channelModel: " + channelModel.toString());
				Picasso.with(activity).load(R.drawable.default_img_tv_channel_error)
				.placeholder(R.drawable.default_img_tv_channel)
				.error(R.drawable.default_img_tv_channel_error)
				.into(viewHolder.imageViewChannelLogo);
				
			}
			if (channelModel.getName() != null) {
				viewHolder.textViewChanneName.setText(channelModel.getName());
			}

		} else {
			view.setVisibility(View.GONE);
		}

		return view;
	}

	private class ViewHolder {
		private ImageView imageViewChannelLogo;
		private TextView textViewChanneName;

	}

}
